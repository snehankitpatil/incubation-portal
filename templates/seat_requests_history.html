{% extends "base.html" %}
{% block content %}

<h1 class="page-title">Seat Change Requests</h1>

<table>
<tr>
    <th>Startup</th>
    <th>Current</th>
    <th>Requested</th>
    <th>User Note</th>
    <th>Status</th>
    <th>Action</th>
</tr>

{% for req, name in requests %}
<tr>
    <td>{{ name }}</td>

    <td>{{ req.current_seats }}</td>

    <td>
        {% if req.requested_seats > 0 %}
            +{{ req.requested_seats }}
        {% else %}
            {{ req.requested_seats }}
        {% endif %}
    </td>

    <td style="max-width:300px;color:#555;">
        {{ req.user_note }}
    </td>

    <!-- STATUS -->
    <td>
        <span class="badge {{ req.status }}">
            {{ req.status }}
        </span>
        {% if req.decided_at %}
            <div style="font-size:12px;color:#777;">
                {{ req.decided_at.strftime("%Y-%m-%d %H:%M") }}
            </div>
        {% endif %}
    </td>

    <!-- ACTION -->
    <td>
        {% if req.status == "pending" %}
            <a class="btn btn-secondary"
               href="/seat-requests/{{ req.id }}/approve">
               Approve
            </a>

            <a class="btn btn-danger"
               href="/seat-requests/{{ req.id }}/reject">
               Reject
            </a>

        {% elif req.status == "approved" %}
            <span style="color:#111;font-size:13px;">
                Approved
            </span>

        {% elif req.status == "rejected" %}
            <span style="color:#888;font-size:13px;">
                Rejected
            </span>
        {% endif %}
    </td>
</tr>
{% endfor %}
</table>

{% endblock %}
